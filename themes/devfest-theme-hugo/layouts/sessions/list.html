{{ define "main" }}

{{ $currentYear := string .Site.Params.currentYear }}
{{ if not (eq .Section "") }}
  {{ $currentYear = .Section }}
{{ end }}


{{ .Content }}


<section>
	<h2>Tutorials</h2>
	<ul class="talks">
		{{ $sessions := (where .Site.AllPages ".Section" $currentYear) }}
		{{ $types := (slice "tutorial") }}
		{{ range sort $sessions ".Title" }}
		{{ if intersect (slice .Params.format) $types }}
		<li class="talk tag-{{ anchorize (delimit (.Params.tags | default (slice)) "" ) }}">{{ partial "session.html" . }}</li>
			{{ end }}
		{{ end }}
	</ul>

	<h2>Invited Talks</h2>
	<ul class="talks">
		{{ $sessions := (where .Site.AllPages ".Section" $currentYear) }}
		{{ $types := (slice "invited") }}
		{{ range sort $sessions ".Title" }}
		{{ if intersect (slice .Params.format) $types }}
		<li class="talk tag-{{ anchorize (delimit (.Params.tags | default (slice)) "" ) }}">{{ partial "session.html" . }}</li>
			{{ end }}
		{{ end }}
	</ul>

	<h2>Contributed Talks</h2>
	<ul class="talks">
		{{ $sessions := (where .Site.AllPages ".Section" $currentYear) }}
		{{ $types := (slice "contributed") }}
		{{ range sort $sessions ".Title" }}
		{{ if intersect (slice .Params.format) $types }}
		<li class="talk tag-{{ anchorize (delimit (.Params.tags | default (slice)) "" ) }}">{{ partial "session.html" . }}</li>
			{{ end }}
		{{ end }}
	</ul>

	<h2>Industry</h2>
	<ul class="talks">
		{{ $sessions := (where .Site.AllPages ".Section" $currentYear) }}
		{{ $types := (slice "industry") }}
		{{ range sort $sessions ".Title" }}
		{{ if intersect (slice .Params.format) $types }}
		<li class="talk tag-{{ anchorize (delimit (.Params.tags | default (slice)) "" ) }}">{{ partial "session.html" . }}</li>
			{{ end }}
		{{ end }}
	</ul>


</section>

{{ end }}
